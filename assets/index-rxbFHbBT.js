import{n as e}from"./rolldown-runtime-y2wrX6ue.js";import{_ as t,a as n,c as r,d as i,f as a,g as o,h as s,i as c,l,m as u,n as d,o as f,p,r as m,s as h,t as g,u as _}from"./vendor-B2JCWO7R.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e){if(t.type!==`childList`)continue;for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var v=e(o()),y=e(t()),b=s({apiKey:`AIzaSyAAEfOsfav3ggQ4ALh8yk3FWXoy7f0POak`,authDomain:`sharedgrocery-140ba.firebaseapp.com`,projectId:`sharedgrocery-140ba`,storageBucket:`sharedgrocery-140ba.firebasestorage.app`,messagingSenderId:`908490668737`,appId:`1:908490668737:web:f90dd9d26dd9d2fc313240`,measurementId:`G-EC4LD8ZDST`});u(b);const x=l(b);var S=e(g()),C={Dairy:{color:`#FFECB3`,icon:`ğŸ¥›`},Veggies:{color:`#C8E6C9`,icon:`ğŸ¥¦`},Snacks:{color:`#FFE0B2`,icon:`ğŸª`},Others:{color:`#E1BEE7`,icon:`ğŸ›ï¸`}};function w(){let[e,t]=(0,y.useState)([]),[o,s]=(0,y.useState)(``),[l,u]=(0,y.useState)(1),[g,v]=(0,y.useState)(`pcs`),[b,w]=(0,y.useState)(``),[T,E]=(0,y.useState)(``),[D,O]=(0,y.useState)(`Dairy`),[k,A]=(0,y.useState)(``),[j,M]=(0,y.useState)(C),[N,P]=(0,y.useState)(null),[F,I]=(0,y.useState)({}),L=f(x,`groups`,`myFlat`,`items`);(0,y.useEffect)(()=>{let e=a(L,i(`order`,`asc`));return _(e,e=>{t(e.docs.map(e=>({id:e.id,...e.data()})))})},[]);let R=async()=>{let t=o.trim();if(!t)return;let r=D;k.trim()&&(r=k.trim(),j[r]||M(e=>({...e,[r]:{color:`hsl(${Math.floor(Math.random()*360)}, 70%, 80%)`,icon:`ğŸ›’`}})),A(``));let i=e.length?Math.max(...e.map(e=>e.order??0)):-1;await n(L,{name:t,quantity:l,unit:g,price:b,notes:T,category:r,done:!1,order:i+1}),s(``),u(1),v(`pcs`),w(``),E(``)},z=async(e,t)=>{await p(r(x,`groups`,`myFlat`,`items`,e),{done:!t})},B=async n=>{if(!n.destination)return;let i=Array.from(e),[a]=i.splice(n.source.index,1);i.splice(n.destination.index,0,a),t(i);for(let e=0;e<i.length;e++)await p(r(x,`groups`,`myFlat`,`items`,i[e].id),{order:e})},V=e=>I({...e,id:e.id}),H=async()=>{let{id:e,name:t,quantity:n,unit:i,price:a,notes:o}=F;t.trim()&&(await p(r(x,`groups`,`myFlat`,`items`,e),{name:t,quantity:n,unit:i,price:a,notes:o}),I({}))},U=async e=>await h(r(x,`groups`,`myFlat`,`items`,e));return(0,S.jsxs)(`div`,{style:{maxWidth:650,margin:`40px auto`,padding:24,borderRadius:12,boxShadow:`0 8px 20px rgba(0,0,0,0.2)`,background:`#fff`,fontFamily:`'Segoe UI', sans-serif`},children:[(0,S.jsxs)(`div`,{style:{textAlign:`center`,marginBottom:20},children:[(0,S.jsx)(`img`,{src:`https://cdn-icons-png.flaticon.com/512/135/135763.png`,alt:`Logo`,width:80,style:{marginBottom:10}}),(0,S.jsx)(`h2`,{children:`ğŸ›’ Shared Grocery Shelf`}),(0,S.jsx)(`p`,{style:{color:`#555`},children:`Add, categorize, and track groceries with your group!`})]}),(0,S.jsxs)(`div`,{style:{display:`flex`,flexWrap:`wrap`,gap:8,marginBottom:16},children:[(0,S.jsx)(`input`,{type:`text`,placeholder:`Item name`,value:o,onChange:e=>s(e.target.value),style:{flex:1,padding:`10px 12px`,borderRadius:8,border:`1px solid #ccc`,fontSize:16}}),(0,S.jsx)(`input`,{type:`number`,min:1,value:l,onChange:e=>u(Number(e.target.value)),style:{width:80,padding:`10px`,borderRadius:8,border:`1px solid #ccc`}}),(0,S.jsx)(`input`,{type:`text`,placeholder:`Unit`,value:g,onChange:e=>v(e.target.value),style:{width:80,padding:`10px`,borderRadius:8,border:`1px solid #ccc`}}),(0,S.jsx)(`input`,{type:`number`,placeholder:`Price`,value:b,onChange:e=>w(e.target.value),style:{width:100,padding:`10px`,borderRadius:8,border:`1px solid #ccc`}}),(0,S.jsx)(`input`,{type:`text`,placeholder:`Notes`,value:T,onChange:e=>E(e.target.value),style:{flex:1,padding:`10px 12px`,borderRadius:8,border:`1px solid #ccc`}}),(0,S.jsx)(`select`,{value:D,onChange:e=>O(e.target.value),style:{borderRadius:8,padding:`10px`,fontSize:16},children:Object.keys(j).map(e=>(0,S.jsx)(`option`,{value:e,children:e},e))}),(0,S.jsx)(`input`,{type:`text`,placeholder:`Or new category`,value:k,onChange:e=>A(e.target.value),style:{flex:1,padding:`10px 12px`,borderRadius:8,border:`1px solid #ccc`}}),(0,S.jsx)(`button`,{onClick:R,style:{padding:`10px 16px`,borderRadius:8,backgroundColor:`#4CAF50`,color:`#fff`,fontWeight:`bold`,cursor:`pointer`},children:`Add`})]}),e.length===0&&(0,S.jsx)(`p`,{style:{textAlign:`center`,color:`#777`,marginTop:40,fontSize:16},children:`Your grocery shelf is empty ğŸ›’ Add some items above!`}),(0,S.jsx)(m,{onDragEnd:B,children:(0,S.jsx)(d,{droppableId:`items`,children:t=>(0,S.jsxs)(`ul`,{ref:t.innerRef,...t.droppableProps,style:{listStyle:`none`,padding:0},children:[e.map((e,t)=>(0,S.jsx)(c,{draggableId:e.id,index:t,children:t=>(0,S.jsxs)(`li`,{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,padding:`12px 16px`,marginBottom:10,borderRadius:8,backgroundColor:j[e.category]?.color||`#f9f9f9`,cursor:`grab`,...t.draggableProps.style},children:[(0,S.jsxs)(`div`,{style:{flex:1,display:`flex`,alignItems:`center`,gap:8},children:[(0,S.jsx)(`input`,{type:`checkbox`,checked:e.done,onChange:()=>z(e.id,e.done)}),F.id===e.id?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(`input`,{type:`text`,value:F.name,onChange:e=>I(t=>({...t,name:e.target.value})),style:{flex:1,padding:`4px 8px`,borderRadius:4,border:`1px solid #ccc`}}),(0,S.jsx)(`input`,{type:`number`,min:1,value:F.quantity,onChange:e=>I(t=>({...t,quantity:Number(e.target.value)})),style:{width:60,padding:`4px 6px`,borderRadius:4,border:`1px solid #ccc`}}),(0,S.jsx)(`input`,{type:`text`,value:F.unit,onChange:e=>I(t=>({...t,unit:e.target.value})),style:{width:60,padding:`4px 6px`,borderRadius:4,border:`1px solid #ccc`}}),(0,S.jsx)(`input`,{type:`number`,value:F.price,onChange:e=>I(t=>({...t,price:e.target.value})),style:{width:80,padding:`4px 6px`,borderRadius:4,border:`1px solid #ccc`}}),(0,S.jsx)(`input`,{type:`text`,value:F.notes,onChange:e=>I(t=>({...t,notes:e.target.value})),style:{flex:1,padding:`4px 8px`,borderRadius:4,border:`1px solid #ccc`}})]}):(0,S.jsxs)(`span`,{style:{textDecoration:e.done?`line-through`:`none`,color:e.done?`#777`:`#333`,fontSize:16},children:[j[e.category]?.icon,` `,e.name,` x`,e.quantity,` `,e.unit,` Rupees - `,e.price,` `,(0,S.jsxs)(`em`,{style:{fontSize:12,color:`#555`},children:[`(`,e.category,`) `,e.notes]})]})]}),(0,S.jsxs)(`div`,{style:{display:`flex`,gap:8},children:[F.id===e.id?(0,S.jsx)(`button`,{onClick:H,style:{cursor:`pointer`},children:`ğŸ’¾`}):(0,S.jsx)(`button`,{onClick:()=>V(e),style:{cursor:`pointer`},children:`âœï¸`}),(0,S.jsx)(`button`,{onClick:()=>U(e.id),style:{cursor:`pointer`},children:`ğŸ—‘ï¸`})]})]})},e.id)),t.placeholder]})})})]})}function T(){return(0,S.jsx)(`div`,{children:(0,S.jsx)(w,{})})}var E=T;(0,v.createRoot)(document.getElementById(`root`)).render((0,S.jsx)(y.StrictMode,{children:(0,S.jsx)(E,{})}));